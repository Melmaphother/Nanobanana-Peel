# ğŸŒ Nanobanana Peel - Remove Background for AI-Generated Images

A lightweight Python tool to remove backgrounds from AI-generated images by adding transparency.

English | [ç®€ä½“ä¸­æ–‡](README_zh.md)

## ğŸ¯ Why This Tool?

Images generated by AI models (like GPT-4o, Gemini, Claude, Grok, DALL-E 3, Midjourney, Flux, Stable Diffusion, and even the latest Nano Banana Pro ğŸŒ) often have two problems:

1. **Backgrounds are not pure white**: They have a slight yellowish or off-white tint, which looks ugly when pasted into documents or presentations
2. **PNGs lack alpha channel**: Even if the background appears "white", it's in RGB format without transparency, causing occlusion when layered with other elements

This tool solves both problems at once:
- Detects pixels close to the background color and makes them fully transparent
- Outputs a clean PNG with alpha channel

## âœ¨ Before & After

| Original Image | After Processing |
|:--------------:|:----------------:|
| ![Original](assets/1.png) | ![Processed](assets/1_rmbg.png) |

> The original image has a subtle off-white background. After processing, the background becomes transparent (shown against black to demonstrate transparency).

## ğŸ“¦ Installation

### Requirements

- Python 3.9+
- NumPy
- Pillow

### Install Dependencies

```bash
pip install numpy pillow
```

### Clone the Repository

```bash
git clone https://github.com/Melmaphother/Nanobanana-Peel.git
cd Nanobanana-Peel
```

## ğŸš€ Usage

### Basic Usage

```bash
python rmbg.py -i input.png -o output.png
```

### With Custom Thresholds

```bash
# More aggressive background removal (lower threshold)
python rmbg.py -i input.png -o output.png --transparent 0.05

# Semi-transparent transition zone
python rmbg.py -i input.png -o output.png --transparent 0.05 --opaque 0.3
```

### Remove Non-White Background

```bash
# Remove black background
python rmbg.py -i input.png -o output.png --background 0,0,0

# Remove custom color background (RGB)
python rmbg.py -i input.png -o output.png --background 128,128,128
```

## âš™ï¸ Parameters

| Parameter | Default | Description |
|-----------|---------|-------------|
| `-i, --input` | (required) | Path to the input image |
| `-o, --output` | (required) | Path to save the output image |
| `--transparent` | `0.1` | Distance threshold (0-1). Pixels with color distance below this become fully transparent |
| `--opaque` | `1.0` | Distance threshold (0-1). Pixels with color distance above this remain fully opaque |
| `--background` | `255,255,255` | Background color to detect as `R,G,B` |

### Understanding Thresholds

The tool calculates the "color distance" between each pixel and the specified background color:

- **Distance = 0**: Pixel is exactly the background color
- **Distance = 1**: Pixel is the maximum possible distance from background

With default settings (`--transparent 0.1`):
- Pixels within 10% distance of white â†’ **Transparent**
- All other pixels â†’ **Keep original**

## ğŸ”§ Global Installation (Add to Shell)

Want to use `rmbg` from anywhere? Add an alias to your shell configuration:

### For Zsh (~/.zshrc)

```bash
# Add this line to your ~/.zshrc
alias rmbg="python /path/to/Nanobanana-Peel/rmbg.py"

# Then reload
source ~/.zshrc
```

### For Bash (~/.bashrc)

```bash
# Add this line to your ~/.bashrc
alias rmbg="python /path/to/Nanobanana-Peel/rmbg.py"

# Then reload
source ~/.bashrc
```

Now you can use it from anywhere:

```bash
rmbg -i ~/Downloads/ai_image.png -o ~/Downloads/ai_image_transparent.png
```

## ğŸ“ How It Works

1. **Load Image**: Read the input PNG file
2. **Calculate Distance**: For each pixel, compute the Euclidean distance to the background color in RGB space
3. **Normalize**: Distance is normalized to [0, 1] range (max distance â‰ˆ 441.67 for RGB)
4. **Apply Transparency**: 
   - Distance < `transparent_threshold` â†’ Alpha = 0 (fully transparent)
   - Distance > `opaque_threshold` â†’ Alpha = 255 (fully opaque)
   - In between â†’ Keep original alpha
5. **Save**: Output as PNG with alpha channel

## ğŸ“ Example Workflow

```bash
# 1. Download an AI-generated image
# 2. Remove the background
rmbg -i ai_generated.png -o clean.png

# 3. For images with stronger yellow tint, use lower threshold
rmbg -i yellow_bg.png -o clean.png --transparent 0.15
```

## ğŸ“„ License

MIT License - feel free to use and modify as needed.

## ğŸ¤ Contributing

Issues and Pull Requests are welcome!

